<div style="padding:0;width:90px;min-height:62px;" class="cmd #history# tooltips cmd-widget" data-type="info" data-subtype="binary" data-cmd_id="#id#" data-cmd_uid="#uid#" data-eqLogic_id="#eqLogic_id#" data-eqLogic_id="#eqLogic_id#" title="#collectDate#">
	<!-- Info Widget
		Basé sur les widget de 	: 
		Mise à jour 			: JAG 20190428 : Simplification code
	-->
	<div class="row">
		<center>
			<div class="cmdName" id="cmdName#id#" style="font-weight: bold;font-size : 10px; #hideCmdName#;">#name_display#</div>
			<div class="iconCmd#uid#"></div>
			<div style="font-weight: bold;font-size : 10px;">
      			<span class="timeCmd#id# timeCmd label-info" ></span>
      		</div>
		</center>
	</div>
</div>
  <script> 
	jeedom.cmd.update['#id#'] = function(_options){
            // Paramètrage du logo
      			var srcImglogo		= ('#logo#'!='#'+'logo#') ? "#logo#" : "Lampe";
	  			var srcImglogo_T 	= ('#logo_type#'!='#'+'logo_type#') ? "#logo_type#": "png";
			// Paramètrage du logo pour Erreur	
			  	var srcImglogoER	= ('#logoER#'!='#'+'logoER#') ? "#logoER#": "oups";
			  	var srcImglogoER_T 	= ('#logoER_type#'!='#'+'logoER_type#') ? "#logoER_type#": "png";
      		// Paramètre "sizeh" & "sizew"
      			var srcImgHeight	= is_numeric('#sizeh#') ? parseFloat('#sizeh#'):80;
      			var srcImgWidth 	= is_numeric('#sizew#') ? parseFloat('#sizew#'):80;
  				var srcImgSize 		= 'height='+srcImgHeight+'px width='+srcImgWidth+'px';
        	// Paramétrage des images
                var srcImgURL 		= 'plugins/widget/core/template/dashboard/cmd.info.binary.Lampe-Binaire/'; 
	       // Affichage durée changement dernier etat
				var srcImglogoTime = '#logoTime#';
      
      var srcImgPath;
        if (parseInt(_options.display_value) == 1) {
			srcImgPath = srcImgURL +srcImglogo+"-ON"+"."+srcImglogo_T;
		} else if (parseInt(_options.display_value) == 0) {
			srcImgPath = srcImgURL +srcImglogo+"-OFF"+"."+srcImglogo_T;
		} else {
			srcImgPath = srcImgURL +srcImglogoER+"."+srcImglogoER_T;
		}
	
		//Affichage image
			$('.iconCmd#uid#').empty().append('<img src="'+srcImgPath+'" '+srcImgSize+'>'); 
      
		// Derniere durée changement dernier etat
      			//Merci @Salvialf pour le code
      		if (srcImglogoTime == "duree") {
				jeedom.cmd.displayDuration(_options.valueDate, $('.cmd[data-cmd_id=#id#] .timeCmd#id#'));
			} else if (srcImglogoTime == "date") {
				var date = new Date(_options.valueDate);
				var format = $.datepicker.formatDate('D dd/mm', date);
				var time = "à "+date.getHours()+":"+(date.getMinutes()<10?'0':'')+date.getMinutes();
				$('.cmd[data-cmd_id=#id#] .timeCmd#id#').empty().html(format+'<br>'+time);
			} else if (srcImglogoTime == "heure") {
				var date = new Date(_options.valueDate);
				var time = "à "+date.getHours()+":"+(date.getMinutes()<10?'0':'')+date.getMinutes()+":"+(date.getSeconds()<10?'0':'')+date.getSeconds()+"";
				$('.cmd[data-cmd_id=#id#] .timeCmd#id#').empty().html(time);
      		};
      
      $('.cmd[data-cmd_id=#id#]').attr('title','Valeur du '+_options.valueDate+', collectée le '+_options.collectDate);
    } 
      jeedom.cmd.update['#id#']({display_value:'#state#',valueDate:'#valueDate#',collectDate:'#collectDate#',alertLevel:'#alertLevel#'});
</script>